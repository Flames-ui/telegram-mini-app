<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anointed Flames TV - Home</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* === Global Styles === */
    :root {
      --smooth-purple: #9c88ff;
      --black-bg: #000000;
      --shinny-black: #121212;
      --supreme-white: #f8f9fa;
      --flame-orange: #ff7b25;
    }

    body {
      background-color: var(--black-bg);
      color: var(--supreme-white);
      font-family: 'Segoe UI', sans-serif;
      padding-top: 20px;
      margin-bottom: 80px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header Styles */
    .header-title {
      background: linear-gradient(135deg, var(--smooth-purple), var(--flame-orange));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
      text-align: center;
      margin-bottom: 30px;
    }

    /* Card Styles */
    .card {
      background-color: var(--shinny-black);
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(156, 136, 255, 0.1);
      border: 1px solid var(--smooth-purple);
      transition: transform 0.3s;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    /* Verse Banner */
    .verse-banner {
      background: linear-gradient(135deg, var(--flame-orange), var(--smooth-purple));
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .verse-banner:hover {
      transform: scale(1.01);
    }

    /* Media Elements */
    .media-preview {
      margin-top: 15px;
      max-width: 100%;
      border-radius: 8px;
      max-height: 500px;
      object-fit: contain;
    }

    /* Action Buttons */
    .actions {
      display: flex;
      justify-content: space-around;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #333;
    }

    .actions a {
      color: var(--smooth-purple);
      text-decoration: none;
      transition: color 0.2s;
    }

    .actions a:hover {
      color: var(--flame-orange);
    }

    /* Navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: var(--shinny-black);
      display: flex;
      justify-content: space-around;
      padding: 15px 0;
      z-index: 1000;
      border-top: 1px solid var(--smooth-purple);
    }

    .bottom-nav a {
      color: var(--smooth-purple);
      font-size: 1.5rem;
      transition: all 0.3s;
    }

    .bottom-nav a.active {
      color: var(--flame-orange);
      transform: translateY(-5px);
    }

    /* Success Alert */
    .success-alert {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #4CAF50, #2E7D32);
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      z-index: 1000;
      display: none;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    /* Ad Containers */
    .ad-container {
      margin: 25px 0;
      padding: 15px;
      background-color: var(--shinny-black);
      border-radius: 8px;
      text-align: center;
      min-height: 250px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px dashed var(--smooth-purple);
    }
  </style>
</head>
<body>
  <div class="success-alert" id="successAlert">
    <i class="fas fa-check-circle"></i> Post published successfully!
  </div>

  <div class="container">
    <h2 class="header-title">
      <i class="fas fa-fire-alt"></i> Anointed Flames TV <i class="fas fa-fire-alt"></i>
    </h2>

    <!-- Bible Verse Banner -->
    <div class="verse-banner" id="verseBanner">
      <i class="fas fa-bible"></i>
      <span id="daily-verse">Loading verse...</span>
    </div>

    <!-- Ad Container -->
    <div class="ad-container">
      <script type="text/javascript">
        atOptions = {
          'key' : '85efa5f0e80d427fecd61c27c0ee4887',
          'format' : 'iframe',
          'height' : 250,
          'width' : 300,
          'params' : {}
        };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/85efa5f0e80d427fecd61c27c0ee4887/invoke.js"></script>
    </div>

    <!-- Posts Container -->
    <div id="postsContainer"></div>

    <!-- Ad Container -->
    <div class="ad-container">
      <script type="text/javascript">
        atOptions = {
          'key' : '85efa5f0e80d427fecd61c27c0ee4887',
          'format' : 'iframe',
          'height' : 250,
          'width' : 300,
          'params' : {}
        };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/85efa5f0e80d427fecd61c27c0ee4887/invoke.js"></script>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav">
    <a href="homepage.html" class="active"><i class="fas fa-home"></i></a>
    <a href="video.html"><i class="fas fa-video"></i></a>
    <a href="post.html"><i class="fas fa-plus-circle"></i></a>
    <a href="profile.html"><i class="fas fa-user"></i></a>
    <a href="menu.html"><i class="fas fa-bars"></i></a>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyB8DFd227dgvCh9TKZ3pe3I0tdDd9MIHp0",
      authDomain: "anointed-flames-tv.firebaseapp.com",
      databaseURL: "https://anointed-flames-tv-default-rtdb.firebaseio.com",
      projectId: "anointed-flames-tv",
      storageBucket: "anointed-flames-tv.appspot.com",
      messagingSenderId: "814825501586",
      appId: "1:814825501586:web:3fb1feb13746bce2e1c74b"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();

    // Load posts from Firebase
    function loadPosts() {
      db.ref('posts').orderByChild('timestamp').limitToLast(20).on('value', (snapshot) => {
        const postsContainer = document.getElementById('postsContainer');
        postsContainer.innerHTML = '';

        snapshot.forEach((childSnapshot) => {
          const post = childSnapshot.val();
          // REMOVED THE APPROVAL CHECK - posts will show immediately
          if (post.postType !== 'video') {
            const postElement = document.createElement('div');
            postElement.className = 'card';
            postElement.innerHTML = `
              <p><strong>${post.userName}</strong> ${post.mediaType ? 'shared a '+post.mediaType : 'posted'}</p>
              ${post.content ? `<p>${post.content}</p>` : ''}
              ${post.mediaUrl ? 
                (post.mediaType === 'image' ? 
                  `<img src="${post.mediaUrl}" class="media-preview">` : 
                  '') : ''}
              <div class="actions">
                <a href="#"><i class="far fa-thumbs-up"></i> Like</a>
                <a href="#"><i class="far fa-comment"></i> Comment</a>
                <a href="#"><i class="far fa-share-square"></i> Share</a>
              </div>
            `;
            postsContainer.appendChild(postElement);
          }
        });

        if (postsContainer.children.length === 0) {
          postsContainer.innerHTML = '<div class="card text-center py-4">No posts yet. Be the first to share!</div>';
        }
      });
    }

    // Daily Verse Rotation
    const dailyVerses = [
      '"For I know the plans I have for you," declares the Lord, "plans to prosper you and not to harm you, plans to give you hope and a future." - Jeremiah 29:11',
      '"Trust in the Lord with all your heart and lean not on your own understanding." - Proverbs 3:5',
      '"I can do all things through Christ who strengthens me." - Philippians 4:13'
    ];

    function displayDailyVerse() {
      const randomIndex = Math.floor(Math.random() * dailyVerses.length);
      document.getElementById('daily-verse').textContent = dailyVerses[randomIndex];
    }

    // Initialize page
    auth.onAuthStateChanged((user) => {
      if (user) {
        loadPosts();
        displayDailyVerse();
        
        document.getElementById('verseBanner').addEventListener('click', displayDailyVerse);
      } else {
        window.location.href = "login.html";
      }
    });

    function showSuccess() {
      const alert = document.getElementById('successAlert');
      alert.style.display = 'block';
      setTimeout(() => alert.style.display = 'none', 3000);
    }
  </script>
</body>
</html>

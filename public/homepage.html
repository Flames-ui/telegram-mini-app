<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anointed Flames TV - Home</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Firebase SDK v9 (modular version) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-analytics-compat.js"></script>
  <style>
    :root {
      --smooth-purple: #9c88ff;
      --black-bg: #000000;
      --shinny-black: #121212;
      --supreme-white: #f8f9fa;
      --nav-height: 60px;
      --post-radius: 15px;
      --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    body {
      background-color: var(--black-bg);
      color: var(--supreme-white);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding-top: var(--nav-height);
      line-height: 1.6;
    }

    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--nav-height);
      background-color: var(--shinny-black);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      z-index: 1000;
      box-shadow: var(--shadow);
    }

    .navbar .brand {
      color: var(--smooth-purple);
      font-weight: bold;
      font-size: 1.5rem;
      font-family: 'Arial Black', sans-serif;
      text-shadow: 0 0 10px rgba(156, 136, 255, 0.5);
    }

    .content {
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }

    /* Bible Verse Banner Styles */
    .verse-banner {
      background: linear-gradient(135deg, var(--smooth-purple), #6c5ce7);
      color: white;
      padding: 15px;
      text-align: center;
      margin: 15px 0 25px;
      border-radius: var(--post-radius);
      font-style: italic;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }
    
    .verse-banner:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
    }
    
    .verse-banner::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s;
    }
    
    .verse-banner:hover::before {
      transform: translateX(100%);
    }
    
    .verse-banner i {
      margin-right: 10px;
      font-size: 1.5rem;
      text-shadow: 0 0 5px rgba(0,0,0,0.3);
    }

    .post-entry {
      background-color: var(--shinny-black);
      border-radius: var(--post-radius);
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      border: 1px solid rgba(156, 136, 255, 0.1);
    }

    .post-entry:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.4);
      border-color: rgba(156, 136, 255, 0.3);
    }

    .post-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }

    .post-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--smooth-purple);
      margin-right: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }

    .post-author {
      font-weight: bold;
      color: var(--smooth-purple);
    }

    .post-time {
      font-size: 0.8rem;
      color: #777;
      margin-left: 5px;
    }

    .post-content {
      margin-bottom: 15px;
      padding: 0 10px;
    }

    .post-media {
      width: 100%;
      border-radius: 10px;
      margin: 10px 0;
      max-height: 500px;
      object-fit: cover;
    }

    .post-actions {
      display: flex;
      justify-content: space-around;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .post-actions a {
      color: #aaa;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: all 0.3s;
      padding: 5px 10px;
      border-radius: 20px;
    }

    .post-actions a:hover {
      color: var(--smooth-purple);
      background-color: rgba(156, 136, 255, 0.1);
    }

    .post-actions a.active-like {
      color: #ff6b6b;
    }

    .post-actions a i {
      font-size: 1.1rem;
    }

    .comment-section {
      margin-top: 15px;
      display: none;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .comment {
      background-color: rgba(30, 30, 30, 0.7);
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 10px;
      border-left: 3px solid var(--smooth-purple);
    }

    .comment-author {
      font-weight: bold;
      color: var(--smooth-purple);
      font-size: 0.9rem;
    }

    .comment-text {
      margin-top: 5px;
      font-size: 0.9rem;
    }

    .comment-input {
      display: flex;
      margin-top: 15px;
    }

    .comment-input input {
      flex: 1;
      background-color: rgba(30, 30, 30, 0.7);
      border: 1px solid rgba(156, 136, 255, 0.3);
      color: white;
      padding: 10px 15px;
      border-radius: 20px 0 0 20px;
      outline: none;
      transition: all 0.3s;
    }

    .comment-input input:focus {
      border-color: var(--smooth-purple);
    }

    .comment-input button {
      background: linear-gradient(135deg, var(--smooth-purple), #6c5ce7);
      color: white;
      border: none;
      padding: 0 20px;
      border-radius: 0 20px 20px 0;
      cursor: pointer;
      transition: all 0.3s;
    }

    .comment-input button:hover {
      opacity: 0.9;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 60px;
      background-color: var(--shinny-black);
      display: flex;
      justify-content: space-around;
      align-items: center;
      z-index: 999;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
    }

    .bottom-nav a {
      color: #555;
      font-size: 1.5rem;
      transition: all 0.3s;
      padding: 10px;
      border-radius: 50%;
    }

    .bottom-nav a:hover, .bottom-nav a.active {
      color: var(--smooth-purple);
      transform: translateY(-5px);
      text-shadow: 0 0 10px rgba(156, 136, 255, 0.5);
    }

    .bottom-nav a.active {
      color: var(--smooth-purple);
      background-color: rgba(156, 136, 255, 0.1);
    }

    footer {
      padding: 20px;
      text-align: center;
      font-size: 0.9rem;
      color: #777;
      margin-bottom: 70px;
    }

    .ad-container {
      margin: 20px 0;
      padding: 10px;
      background-color: var(--shinny-black);
      border-radius: var(--post-radius);
      text-align: center;
      overflow: hidden;
      box-shadow: var(--shadow);
      border: 1px solid rgba(156, 136, 255, 0.1);
    }

    .likes-count {
      font-size: 0.8rem;
      color: #777;
      margin-left: 5px;
    }

    /* Share Modal Styles */
    .share-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.9);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(5px);
      animation: fadeIn 0.3s ease;
    }
    
    .share-content {
      background-color: var(--shinny-black);
      padding: 25px;
      border-radius: 15px;
      width: 90%;
      max-width: 400px;
      text-align: center;
      box-shadow: 0 5px 20px rgba(0,0,0,0.5);
      border: 1px solid rgba(156, 136, 255, 0.2);
    }
    
    .share-content h4 {
      color: var(--smooth-purple);
      margin-bottom: 20px;
      font-size: 1.3rem;
    }
    
    .share-icons {
      display: flex;
      justify-content: center;
      margin: 20px 0;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .share-icon {
      font-size: 2.5rem;
      cursor: pointer;
      transition: all 0.3s;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background-color: rgba(30, 30, 30, 0.7);
    }
    
    .share-icon:hover {
      transform: scale(1.1) translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    
    .close-share {
      color: var(--smooth-purple);
      background: none;
      border: 1px solid var(--smooth-purple);
      padding: 8px 20px;
      border-radius: 20px;
      cursor: pointer;
      margin-top: 15px;
      transition: all 0.3s;
      font-weight: bold;
    }
    
    .close-share:hover {
      background-color: var(--smooth-purple);
      color: white;
    }
    
    .facebook { color: #3b5998; }
    .twitter { color: #1da1f2; }
    .whatsapp { color: #25d366; }
    .telegram { color: #0088cc; }
    .linkedin { color: #0077b5; }
    .reddit { color: #ff5700; }
    .email { color: #d44638; }

    /* Floating Action Button */
    .fab-button {
      position: fixed;
      bottom: 80px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--smooth-purple), #6c5ce7);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      box-shadow: 0 4px 15px rgba(156, 136, 255, 0.4);
      z-index: 998;
      cursor: pointer;
      transition: all 0.3s;
    }

    .fab-button:hover {
      transform: scale(1.1) translateY(-5px);
      box-shadow: 0 6px 20px rgba(156, 136, 255, 0.6);
    }

    /* Loading Spinner */
    .spinner {
      display: none;
      width: 40px;
      height: 40px;
      margin: 20px auto;
      border: 4px solid rgba(156, 136, 255, 0.3);
      border-radius: 50%;
      border-top-color: var(--smooth-purple);
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Post Loading Skeleton */
    .skeleton-post {
      background-color: var(--shinny-black);
      border-radius: var(--post-radius);
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
    }

    .skeleton-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }

    .skeleton-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: rgba(156, 136, 255, 0.1);
      margin-right: 10px;
    }

    .skeleton-line {
      height: 12px;
      background-color: rgba(156, 136, 255, 0.1);
      border-radius: 6px;
      margin-bottom: 10px;
    }

    .skeleton-line.short {
      width: 60%;
    }

    .skeleton-line.medium {
      width: 80%;
    }

    .skeleton-content {
      margin-bottom: 15px;
    }

    .skeleton-media {
      width: 100%;
      height: 200px;
      background-color: rgba(156, 136, 255, 0.1);
      border-radius: 10px;
      margin: 10px 0;
    }

    .skeleton-actions {
      display: flex;
      justify-content: space-around;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .skeleton-action {
      width: 60px;
      height: 20px;
      background-color: rgba(156, 136, 255, 0.1);
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <!-- Top Navbar -->
  <div class="navbar">
    <div class="brand">Anointed Flames</div>
    <div class="nav-icons">
      <i class="fas fa-search" style="color: var(--smooth-purple); font-size: 1.2rem; cursor: pointer;"></i>
    </div>
  </div>

  <!-- Main Content -->
  <div class="content">
    <!-- Bible Verse Banner -->
    <div class="verse-banner" id="verseBanner">
      <i class="fas fa-bible"></i>
      <span id="daily-verse">Loading verse...</span>
    </div>

    <!-- Loading Spinner -->
    <div class="spinner" id="loadingSpinner"></div>

    <!-- Skeleton Loader -->
    <div id="skeletonLoader">
      <div class="skeleton-post">
        <div class="skeleton-header">
          <div class="skeleton-avatar"></div>
          <div style="flex: 1;">
            <div class="skeleton-line short"></div>
            <div class="skeleton-line medium" style="width: 40%; margin-top: 5px;"></div>
          </div>
        </div>
        <div class="skeleton-content">
          <div class="skeleton-line"></div>
          <div class="skeleton-line" style="width: 90%;"></div>
          <div class="skeleton-line" style="width: 70%;"></div>
        </div>
        <div class="skeleton-media"></div>
        <div class="skeleton-actions">
          <div class="skeleton-action"></div>
          <div class="skeleton-action"></div>
          <div class="skeleton-action"></div>
        </div>
      </div>
      <div class="skeleton-post">
        <div class="skeleton-header">
          <div class="skeleton-avatar"></div>
          <div style="flex: 1;">
            <div class="skeleton-line short"></div>
            <div class="skeleton-line medium" style="width: 40%; margin-top: 5px;"></div>
          </div>
        </div>
        <div class="skeleton-content">
          <div class="skeleton-line"></div>
          <div class="skeleton-line" style="width: 90%;"></div>
        </div>
        <div class="skeleton-actions">
          <div class="skeleton-action"></div>
          <div class="skeleton-action"></div>
          <div class="skeleton-action"></div>
        </div>
      </div>
    </div>

    <!-- Posts Container -->
    <div id="postsContainer"></div>

    <!-- Ad Container -->
    <div class="ad-container">
      <script type="text/javascript">
        atOptions = {
          'key' : '85efa5f0e80d427fecd61c27c0ee4887',
          'format' : 'iframe',
          'height' : 250,
          'width' : 300,
          'params' : {}
        };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/85efa5f0e80d427fecd61c27c0ee4887/invoke.js"></script>
    </div>
  </div>

  <!-- Floating Action Button -->
  <div class="fab-button" onclick="window.location.href='post.html'">
    <i class="fas fa-plus"></i>
  </div>

  <!-- Share Modal -->
  <div class="share-modal" id="shareModal">
    <div class="share-content">
      <h4>Share This Post</h4>
      <div class="share-icons">
        <div class="share-icon facebook" onclick="shareTo('facebook')">
          <i class="fab fa-facebook-f"></i>
        </div>
        <div class="share-icon twitter" onclick="shareTo('twitter')">
          <i class="fab fa-twitter"></i>
        </div>
        <div class="share-icon whatsapp" onclick="shareTo('whatsapp')">
          <i class="fab fa-whatsapp"></i>
        </div>
        <div class="share-icon telegram" onclick="shareTo('telegram')">
          <i class="fab fa-telegram-plane"></i>
        </div>
        <div class="share-icon linkedin" onclick="shareTo('linkedin')">
          <i class="fab fa-linkedin-in"></i>
        </div>
        <div class="share-icon reddit" onclick="shareTo('reddit')">
          <i class="fab fa-reddit-alien"></i>
        </div>
        <div class="share-icon email" onclick="shareTo('email')">
          <i class="fas fa-envelope"></i>
        </div>
      </div>
      <button class="close-share" onclick="closeShareModal()">Close</button>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav">
    <a href="homepage.html" class="active"><i class="fas fa-home"></i></a>
    <a href="video.html"><i class="fas fa-video"></i></a>
    <a href="post.html"><i class="fas fa-plus-circle"></i></a>
    <a href="profile.html"><i class="fas fa-user"></i></a>
    <a href="menu.html"><i class="fas fa-bars"></i></a>
  </div>

  <footer>
    &copy; 2025 Anointed Flames TV. Powered by God.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Firebase Configuration -->
  <script>
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyB8DFd227dgvCh9TKZ3pe3I0tdDd9MIHp0",
      authDomain: "anointed-flames-tv.firebaseapp.com",
      databaseURL: "https://anointed-flames-tv-default-rtdb.firebaseio.com",
      projectId: "anointed-flames-tv",
      storageBucket: "anointed-flames-tv.firebasestorage.app",
      messagingSenderId: "814825501586",
      appId: "1:814825501586:web:3fb1feb13746bce2e1c74b",
      measurementId: "G-CZR5508L92"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const analytics = firebase.analytics();
    const db = firebase.firestore();
    const auth = firebase.auth();

    // Reference to posts collection
    const postsRef = db.collection("posts");

    // Track liked posts
    const likedPosts = {};

    // Function to create a post element
    function createPostElement(post) {
      const postElement = document.createElement('div');
      postElement.className = 'post-entry';
      postElement.setAttribute('data-post-id', post.id);
      
      // Format the date
      const postDate = post.timestamp?.toDate() || new Date();
      const formattedDate = postDate.toLocaleDateString('en-US', {
        month: 'short',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
      
      // Get first letter of author's name for avatar
      const avatarLetter = post.author ? post.author.charAt(0).toUpperCase() : 'A';
      
      // Create post HTML
      postElement.innerHTML = `
        <div class="post-header">
          <div class="post-avatar">${avatarLetter}</div>
          <div>
            <span class="post-author">${post.author || 'Anonymous'}</span>
            <span class="post-time">${formattedDate}</span>
          </div>
        </div>
        <div class="post-content">
          <p>${post.content || ''}</p>
          ${post.media ? `<img src="${post.media}" class="post-media" alt="Post media">` : ''}
          ${post.audio ? `<audio controls style="width: 100%"><source src="${post.audio}" type="audio/mpeg"></audio>` : ''}
        </div>
        <div class="post-actions">
          <a href="#" class="like-btn" onclick="toggleLike('${post.id}')">
            <i class="far fa-thumbs-up"></i> Like 
            <span class="likes-count" id="likes-${post.id}">${post.likes || 0}</span>
          </a>
          <a href="#" class="comment-btn" onclick="toggleComments('${post.id}')">
            <i class="far fa-comment"></i> Comment
          </a>
          <a href="#" class="share-btn" onclick="sharePost('${post.id}')">
            <i class="far fa-share-square"></i> Share
          </a>
        </div>
        <div class="comment-section" id="comments-${post.id}">
          ${post.comments ? post.comments.map(comment => `
            <div class="comment">
              <div class="comment-author">${comment.user}:</div>
              <div class="comment-text">${comment.text}</div>
            </div>
          `).join('') : ''}
          <div class="comment-input">
            <input type="text" placeholder="Write a comment..." id="comment-input-${post.id}">
            <button onclick="postComment('${post.id}')">Post</button>
          </div>
        </div>
      `;
      
      return postElement;
    }

    // Load posts from Firestore
    function loadPosts() {
      document.getElementById('loadingSpinner').style.display = 'block';
      document.getElementById('skeletonLoader').style.display = 'block';
      document.getElementById('postsContainer').innerHTML = '';
      
      postsRef.orderBy('timestamp', 'desc').get().then((querySnapshot) => {
        document.getElementById('loadingSpinner').style.display = 'none';
        document.getElementById('skeletonLoader').style.display = 'none';
        
        if (querySnapshot.empty) {
          document.getElementById('postsContainer').innerHTML = `
            <div class="post-entry" style="text-align: center;">
              <p>No posts yet. Be the first to share!</p>
            </div>
          `;
          return;
        }
        
        querySnapshot.forEach((doc) => {
          const post = {
            id: doc.id,
            ...doc.data()
          };
          const postElement = createPostElement(post);
          document.getElementById('postsContainer').appendChild(postElement);
          
          // Check if current user has liked this post
          if (auth.currentUser) {
            const userId = auth.currentUser.uid;
            const likeKey = `liked_${post.id}_${userId}`;
            if (likedPosts[likeKey]) {
              postElement.querySelector('.like-btn').classList.add('active-like');
            }
          }
        });
      }).catch((error) => {
        console.error("Error loading posts: ", error);
        document.getElementById('loadingSpinner').style.display = 'none';
        document.getElementById('skeletonLoader').style.display = 'none';
        document.getElementById('postsContainer').innerHTML = `
          <div class="post-entry" style="text-align: center;">
            <p>Error loading posts. Please try again later.</p>
          </div>
        `;
      });
    }

    // Toggle like on a post
    function toggleLike(postId) {
      if (!auth.currentUser) {
        alert("Please sign in to like posts");
        return;
      }

      const postRef = postsRef.doc(postId);
      const userId = auth.currentUser.uid;
      const likeKey = `liked_${postId}_${userId}`;

      if (likedPosts[likeKey]) {
        // Unlike
        postRef.update({
          likes: firebase.firestore.FieldValue.increment(-1)
        }).then(() => {
          document.querySelector(`[data-post-id="${postId}"] .like-btn`).classList.remove('active-like');
          likedPosts[likeKey] = false;
          updateLikesCount(postId);
        });
      } else {
        // Like
        postRef.update({
          likes: firebase.firestore.FieldValue.increment(1)
        }).then(() => {
          document.querySelector(`[data-post-id="${postId}"] .like-btn`).classList.add('active-like');
          likedPosts[likeKey] = true;
          updateLikesCount(postId);
        });
      }
    }

    // Update likes count in UI
    function updateLikesCount(postId) {
      postsRef.doc(postId).get().then((doc) => {
        if (doc.exists) {
          document.getElementById(`likes-${postId}`).textContent = doc.data().likes || 0;
        }
      });
    }

    // Toggle comments section
    function toggleComments(postId) {
      const commentsSection = document.getElementById(`comments-${postId}`);
      if (commentsSection.style.display === 'block') {
        commentsSection.style.display = 'none';
      } else {
        commentsSection.style.display = 'block';
      }
    }

    // Post a comment
    function postComment(postId) {
      if (!auth.currentUser) {
        alert("Please sign in to comment");
        return;
      }

      const commentInput = document.getElementById(`comment-input-${postId}`);
      const commentText = commentInput.value.trim();
      
      if (commentText === '') return;

      const user = auth.currentUser.displayName || "Anonymous";
      const newComment = {
        user: user,
        text: commentText,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      };

      postsRef.doc(postId).update({
        comments: firebase.firestore.FieldValue.arrayUnion(newComment)
      }).then(() => {
        const commentsContainer = document.getElementById(`comments-${postId}`);
        const commentDiv = document.createElement('div');
        commentDiv.className = 'comment';
        commentDiv.innerHTML = `
          <div class="comment-author">${user}:</div>
          <div class="comment-text">${commentText}</div>
        `;
        commentsContainer.insertBefore(commentDiv, commentsContainer.querySelector('.comment-input'));
        commentInput.value = '';
      }).catch((error) => {
        console.error("Error posting comment: ", error);
        alert("Error posting comment. Please try again.");
      });
    }

    // Global variable to store current post being shared
    let currentSharingPost = null;
    
    // Share post function
    function sharePost(postId) {
      const postElement = document.querySelector(`[data-post-id="${postId}"]`);
      currentSharingPost = {
        id: postId,
        text: postElement.querySelector('.post-content p')?.textContent || "Check out this inspiring post from Anointed Flames TV",
        url: window.location.href.split('#')[0] + '#' + postId
      };
      
      // Show the share modal
      document.getElementById('shareModal').style.display = 'flex';
    }
    
    function closeShareModal() {
      document.getElementById('shareModal').style.display = 'none';
    }
    
    // Share to specific platform
    function shareTo(platform) {
      if (!currentSharingPost) return;
      
      const text = encodeURIComponent(currentSharingPost.text);
      const url = encodeURIComponent(currentSharingPost.url);
      
      let shareUrl = '';
      
      switch(platform) {
        case 'facebook':
          shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`;
          break;
        case 'twitter':
          shareUrl = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
          break;
        case 'whatsapp':
          shareUrl = `https://wa.me/?text=${text} ${url}`;
          break;
        case 'telegram':
          shareUrl = `https://t.me/share/url?url=${url}&text=${text}`;
          break;
        case 'linkedin':
          shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${url}`;
          break;
        case 'reddit':
          shareUrl = `https://www.reddit.com/submit?url=${url}&title=${text}`;
          break;
        case 'email':
          shareUrl = `mailto:?subject=Check%20this%20post&body=${text}%0A%0A${url}`;
          break;
        default:
          return;
      }
      
      window.open(shareUrl, '_blank', 'width=600,height=400');
      closeShareModal();
    }

    // Close modal when clicking outside
    window.addEventListener('click', function(event) {
      if (event.target === document.getElementById('shareModal')) {
        closeShareModal();
      }
    });

    // Daily Verse Rotation Script with 50+ verses
    const dailyVerses = [
      { verse: '"For I know the plans I have for you," declares the Lord, "plans to prosper you and not to harm you, plans to give you hope and a future."', reference: "Jeremiah 29:11" },
      { verse: '"Trust in the Lord with all your heart and lean not on your own understanding."', reference: "Proverbs 3:5" },
      { verse: '"I can do all things through Christ who strengthens me."', reference: "Philippians 4:13" },
      { verse: '"The Lord is my shepherd, I lack nothing."', reference: "Psalm 23:1" },
      { verse: '"Be strong and courageous. Do not be afraid; do not be discouraged, for the Lord your God will be with you wherever you go."', reference: "Joshua 1:9" },
      { verse: '"Cast all your anxiety on him because he cares for you."', reference: "1 Peter 5:7" },
      { verse: '"But seek first his kingdom and his righteousness, and all these things will be given to you as well."', reference: "Matthew 6:33" },
      { verse: '"For God so loved the world that he gave his one and only Son, that whoever believes in him shall not perish but have eternal life."', reference: "John 3:16" },
      { verse: '"The Lord is my light and my salvation—whom shall I fear?"', reference: "Psalm 27:1" },
      { verse: '"Do not be anxious about anything, but in every situation, by prayer and petition, with thanksgiving, present your requests to God."', reference: "Philippians 4:6" },
      { verse: '"And we know that in all things God works for the good of those who love him, who have been called according to his purpose."', reference: "Romans 8:28" },
      { verse: '"Jesus looked at them and said, "With man this is impossible, but with God all things are possible.""', reference: "Matthew 19:26" },
      { verse: '"But the fruit of the Spirit is love, joy, peace, forbearance, kindness, goodness, faithfulness, gentleness and self-control."', reference: "Galatians 5:22-23" },
      { verse: '"The name of the Lord is a fortified tower; the righteous run to it and are safe."', reference: "Proverbs 18:10" },
      { verse: '"For the word of God is alive and active. Sharper than any double-edged sword."', reference: "Hebrews 4:12" },
      { verse: '"Come to me, all you who are weary and burdened, and I will give you rest."', reference: "Matthew 11:28" },
      { verse: '"The Lord will fight for you; you need only to be still."', reference: "Exodus 14:14" },
      { verse: '"But you will receive power when the Holy Spirit comes on you; and you will be my witnesses."', reference: "Acts 1:8" },
      { verse: '"Therefore, if anyone is in Christ, the new creation has come: The old has gone, the new is here!"', reference: "2 Corinthians 5:17" },
      { verse: '"Rejoice always, pray continually, give thanks in all circumstances; for this is God\'s will for you in Christ Jesus."', reference: "1 Thessalonians 5:16-18" },
      { verse: '"Your word is a lamp for my feet, a light on my path."', reference: "Psalm 119:105" },
      { verse: '"The Lord is close to the brokenhearted and saves those who are crushed in spirit."', reference: "Psalm 34:18" },
      { verse: '"But the Lord is faithful, and he will strengthen you and protect you from the evil one."', reference: "2 Thessalonians 3:3" },
      { verse: '"So do not fear, for I am with you; do not be dismayed, for I am your God. I will strengthen you and help you; I will uphold you with my righteous right hand."', reference: "Isaiah 41:10" },
      { verse: '"But God demonstrates his own love for us in this: While we were still sinners, Christ died for us."', reference: "Romans 5:8" },
      { verse: '"For we live by faith, not by sight."', reference: "2 Corinthians 5:7" },
      { verse: '"In the beginning was the Word, and the Word was with God, and the Word was God."', reference: "John 1:1" },
      { verse: '"The Lord is good, a refuge in times of trouble. He cares for those who trust in him."', reference: "Nahum 1:7" },
      { verse: '"He gives strength to the weary and increases the power of the weak."', reference: "Isaiah 40:29" },
      { verse: '"The Lord is my strength and my shield; my heart trusts in him, and he helps me."', reference: "Psalm 28:7" },
      { verse: '"But you, Lord, are a shield around me, my glory, the One who lifts my head high."', reference: "Psalm 3:3" },
      { verse: '"Taste and see that the Lord is good; blessed is the one who takes refuge in him."', reference: "Psalm 34:8" },
      { verse: '"The Lord is my rock, my fortress and my deliverer; my God is my rock, in whom I take refuge."', reference: "Psalm 18:2" },
      { verse: '"For the wages of sin is death, but the gift of God is eternal life in Christ Jesus our Lord."', reference: "Romans 6:23" },
      { verse: '"And my God will meet all your needs according to the riches of his glory in Christ Jesus."', reference: "Philippians 4:19" },
      { verse: '"But those who hope in the Lord will renew their strength. They will soar on wings like eagles; they will run and not grow weary, they will walk and not be faint."', reference: "Isaiah 40:31" },
      { verse: '"If we confess our sins, he is faithful and just and will forgive us our sins and purify us from all unrighteousness."', reference: "1 John 1:9" },
      { verse: '"Be kind and compassionate to one another, forgiving each other, just as in Christ God forgave you."', reference: "Ephesians 4:32" },
      { verse: '"Let everything that has breath praise the Lord. Praise the Lord."', reference: "Psalm 150:6" },
      { verse: '"But the wisdom that comes from heaven is first of all pure; then peace-loving, considerate, submissive, full of mercy and good fruit, impartial and sincere."', reference: "James 3:17" },
      { verse: '"Therefore encourage one another and build each other up, just as in fact you are doing."', reference: "1 Thessalonians 5:11" },
      { verse: '"Do not let any unwholesome talk come out of your mouths, but only what is helpful for building others up according to their needs, that it may benefit those who listen."', reference: "Ephesians 4:29" },
      { verse: '"Finally, brothers and sisters, whatever is true, whatever is noble, whatever is right, whatever is pure, whatever is lovely, whatever is admirable—if anything is excellent or praiseworthy—think about such things."', reference: "Philippians 4:8" },
      { verse: '"And whatever you do, whether in word or deed, do it all in the name of the Lord Jesus, giving thanks to God the Father through him."', reference: "Colossians 3:17" },
      { verse: '"But the Lord said to Samuel, "Do not consider his appearance or his height, for I have rejected him. The Lord does not look at the things people look at. People look at the outward appearance, but the Lord looks at the heart.""', reference: "1 Samuel 16:7" },
      { verse: '"For the Spirit God gave us does not make us timid, but gives us power, love and self-discipline."', reference: "2 Timothy 1:7" },
      { verse: '"Whoever dwells in the shelter of the Most High will rest in the shadow of the Almighty."', reference: "Psalm 91:1" },
      { verse: '"But you are a chosen people, a royal priesthood, a holy nation, God\'s special possession, that you may declare the praises of him who called you out of darkness into his wonderful light."', reference: "1 Peter 2:9" },
      { verse: '"A new command I give you: Love one another. As I have loved you, so you must love one another."', reference: "John 13:34" }
    ];

    // Display random daily verse
    function displayDailyVerse() {
      const randomIndex = Math.floor(Math.random() * dailyVerses.length);
      const selectedVerse = dailyVerses[randomIndex];
      
      document.getElementById('daily-verse').textContent = 
        `${selectedVerse.verse} - ${selectedVerse.reference}`;
    }

    // Click to get new verse
    document.getElementById('verseBanner').addEventListener('click', displayDailyVerse);

    // Initialize the app when auth state changes
    auth.onAuthStateChanged((user) => {
      if (user) {
        console.log("User is signed in:", user);
        // Load posts
        loadPosts();
        
        // Set up real-time listener for new posts
        postsRef.orderBy('timestamp', 'desc').onSnapshot((snapshot) => {
          // Don't reload if we're just getting metadata changes
          if (!snapshot.metadata.hasPendingWrites) {
            loadPosts();
          }
        });
      } else {
        console.log("No user is signed in");
        // Still load posts but without like tracking
        loadPosts();
      }
    });

    // Call the function when page loads
    window.onload = function() {
      displayDailyVerse();
    };
  </script>
</body>
</html>

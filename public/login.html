// Firebase config (use your env vars in real app)
const firebaseConfig = {
  apiKey: "AIzaSyB8DFd227dgvCh9TKZ3pe3I0tdDd9MIHp0",
  authDomain: "anointed-flames-tv.firebaseapp.com",
  projectId: "anointed-flames-tv",
  storageBucket: "anointed-flames-tv.firebasestorage.app",
  messagingSenderId: "814825501586",
  appId: "1:814825501586:web:3fb1feb13746bce2e1c74b",
  measurementId: "G-CZR5508L92"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

// Redirect logged in user immediately to homepage.html
auth.onAuthStateChanged((user) => {
  if (user) {
    window.location.href = "homepage.html";
  }
});

// Handle Sign In form submission
document.getElementById("signin-form").addEventListener("submit", function(e) {
  e.preventDefault();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  const message = document.getElementById("message");

  message.className = "message";
  message.textContent = "";

  auth.signInWithEmailAndPassword(email, password)
    .then(() => {
      message.className = "message success";
      message.textContent = "Sign in successful! Redirecting...";
      setTimeout(() => {
        window.location.href = "homepage.html";  // Redirect here consistently
      }, 1500);
    })
    .catch((error) => {
      message.className = "message error";
      message.textContent = error.message;
    });
});
